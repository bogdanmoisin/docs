<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://www.elcodi.io/component/menu/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>Menu - Elcodi Documentation</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">

        <link href="../../css/elcodi.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../.."><img src="../../img/elcodi.png" height="30" /></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                
                
                
                    
                        <li >
                            <a href="../../quick-start/">Quick start</a>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Book <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../../book/cart-architecture/">Cart architecture</a>
</li>

                            
                                
<li >
    <a href="../../book/category-architecture/">Category architecture</a>
</li>

                            
                                
<li >
    <a href="../../book/commands/">Commands</a>
</li>

                            
                                
<li >
    <a href="../../book/coupon-architecture/">Coupon architecture</a>
</li>

                            
                                
<li >
    <a href="../../book/dictionary/">Dictionary</a>
</li>

                            
                                
<li >
    <a href="../../book/emails/">Emails</a>
</li>

                            
                                
<li >
    <a href="../../book/events/">Events</a>
</li>

                            
                                
<li >
    <a href="../../book/features/">Features</a>
</li>

                            
                                
<li >
    <a href="../../book/">Home</a>
</li>

                            
                                
<li >
    <a href="../../book/payments/">Payments</a>
</li>

                            
                                
<li >
    <a href="../../book/philosophy/">Philosophy</a>
</li>

                            
                                
<li >
    <a href="../../book/plugins/">Plugins</a>
</li>

                            
                                
<li >
    <a href="../../book/processes/">Processes</a>
</li>

                            
                                
<li >
    <a href="../../book/product-architecture/">Product architecture</a>
</li>

                            
                                
<li >
    <a href="../../book/pull-requests/">Pull requests</a>
</li>

                            
                                
<li >
    <a href="../../book/roadmap/">Roadmap</a>
</li>

                            
                                
<li >
    <a href="../../book/running-test-suite/">Running test suite</a>
</li>

                            
                                
<li >
    <a href="../../book/shipping/">Shipping</a>
</li>

                            
                                
<li >
    <a href="../../book/standards/">Standards</a>
</li>

                            
                                
<li >
    <a href="../../book/templates/">Templates</a>
</li>

                            
                                
<li >
    <a href="../../book/translate-elcodi/">Translate elcodi</a>
</li>

                            
                                
<li >
    <a href="../../book/vagrant-quick-start/">Vagrant quick start</a>
</li>

                            
                                
<li >
    <a href="../../book/what-is-elcodi/">What is elcodi</a>
</li>

                            
                                
<li >
    <a href="../../book/why-elcodi/">Why elcodi</a>
</li>

                            
                            </ul>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Cookbook <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../../cookbook/">Home</a>
</li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Installation</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../cookbook/installation/install-a-plugin/">Install a plugin</a>
</li>

        
            
<li >
    <a href="../../cookbook/installation/install-dependent-bundles/">Install dependent bundles</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Overwrite</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../cookbook/overwrite/overwrite-a-parameter/">Overwrite a parameter</a>
</li>

        
            
<li >
    <a href="../../cookbook/overwrite/overwrite-a-service/">Overwrite a service</a>
</li>

        
            
<li >
    <a href="../../cookbook/overwrite/overwrite-an-entity/">Overwrite an entity</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Deprecation</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../cookbook/deprecation/deprecate-a-method/">Deprecate a method</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Adapters</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../cookbook/adapters/currency-rates-populator/">Currency rates populator</a>
</li>

        
            
<li >
    <a href="../../cookbook/adapters/image-resize/">Image resize</a>
</li>

        
            
<li >
    <a href="../../cookbook/adapters/location-loader/">Location loader</a>
</li>

        
            
<li >
    <a href="../../cookbook/adapters/location-populator/">Location populator</a>
</li>

        
            
<li >
    <a href="../../cookbook/adapters/location-provider/">Location provider</a>
</li>

        
            
<li >
    <a href="../../cookbook/adapters/metric-bucket/">Metric bucket</a>
</li>

        
            
<li >
    <a href="../../cookbook/adapters/related-purchasables-provider/">Related purchasables provider</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Workflow</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../cookbook/workflow/create-automatic-coupon/">Create automatic coupon</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Usage</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../cookbook/usage/elcodi-watermark/">Elcodi watermark</a>
</li>

        
            
<li >
    <a href="../../cookbook/usage/referrer-domain/">Referrer domain</a>
</li>

        
    </ul>
  </li>

                            
                                
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Implementation</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../cookbook/implementation/implement-a-collector/">Implement a collector</a>
</li>

        
            
<li >
    <a href="../../cookbook/implementation/implement-a-controller-and-a-command/">Implement a controller and a command</a>
</li>

        
            
<li >
    <a href="../../cookbook/implementation/implement-a-factory/">Implement a factory</a>
</li>

        
            
<li >
    <a href="../../cookbook/implementation/implement-a-form-type/">Implement a form type</a>
</li>

        
            
<li >
    <a href="../../cookbook/implementation/implement-a-repository/">Implement a repository</a>
</li>

        
            
<li >
    <a href="../../cookbook/implementation/implement-an-entity/">Implement an entity</a>
</li>

        
            
<li >
    <a href="../../cookbook/implementation/implement-an-event-listener/">Implement an event listener</a>
</li>

        
    </ul>
  </li>

                            
                            </ul>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown active">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Component <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
<li >
    <a href="../entity-translator/">Entity translator</a>
</li>

                            
                                
<li >
    <a href="../">Home</a>
</li>

                            
                                
<li >
    <a href="../media/">Media</a>
</li>

                            
                                
<li class="active">
    <a href="./">Menu</a>
</li>

                            
                                
<li >
    <a href="../metrics/">Metrics</a>
</li>

                            
                                
<li >
    <a href="../sitemap/">Sitemap</a>
</li>

                            
                                
<li >
    <a href="../state-transition-machine/">State transition machine</a>
</li>

                            
                                
<li >
    <a href="../template/">Template</a>
</li>

                            
                            </ul>
                        </li>
                    
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../media/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../metrics/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/elcodi/docs">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#menu">Menu</a></li>
        
            <li><a href="#what-offers">What offers</a></li>
        
            <li><a href="#structure">Structure</a></li>
        
            <li><a href="#creating-a-new-menu">Creating a new Menu</a></li>
        
            <li><a href="#managing-menus">Managing menus</a></li>
        
            <li><a href="#cache">Cache</a></li>
        
            <li><a href="#specific-menus">Specific menus</a></li>
        
            <li><a href="#priority">Priority</a></li>
        
            <li><a href="#filtering-menus">Filtering menus</a></li>
        
            <li><a href="#building-menus">Building menus</a></li>
        
            <li><a href="#modifying-menus">Modifying menus</a></li>
        
            <li><a href="#using-the-dic">Using the DIC</a></li>
        
            <li><a href="#workflow">Workflow</a></li>
        
            <li><a href="#cache_1">Cache</a></li>
        
            <li><a href="#specific-menus_1">Specific menus</a></li>
        
            <li><a href="#priority_1">Priority</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="menu">Menu<a class="headerlink" href="#menu" title="Permanent link"> #</a></h1>
<p>Create, manage and modify menus and nodes in a very simple and intuitive way.</p>
<ul>
<li><a href="https://github.com/elcodi/Menu">Component Repository</a></li>
<li><a href="https://github.com/elcodi/MenuBundle">Bundle Repository</a></li>
</ul>
<p>The main goal of this component is the decoupling between how a menu must be 
created by a project, and the way all leafs are generated, filtered and 
modified, in order to give this responsibility to the actor who really has to
do it.</p>
<h2 id="what-offers">What offers<a class="headerlink" href="#what-offers" title="Permanent link"> #</a></h2>
<p>This component offers both the basic model for such structure, basically 
composed by two simple entities (Menu and MenuNode), with a very detailed and
specific business layer. In this layer you will find all the tools to extend
and modify built structures.</p>
<h2 id="structure">Structure<a class="headerlink" href="#structure" title="Permanent link"> #</a></h2>
<p>Let's see a simple view of how Menu is modeled</p>
<pre><code>Menu
  |
  |- Node1
  |   |
  |   |- Node2
  |   |   |
  |   |   |- Node3
  |   |
  |   |- Node4
  |
  |- Node5
</code></pre>

<h2 id="creating-a-new-menu">Creating a new Menu<a class="headerlink" href="#creating-a-new-menu" title="Permanent link"> #</a></h2>
<p>You can create a new Menu with their MenuNodes just using their factories. Let's
see an example of how to build a structure.</p>
<pre><code class="php">use Elcodi\Component\Menu\Factory\MenuFactory;
use Elcodi\Component\Menu\Factory\NodeFactory;

$menuNodeFactory = new NodeFactory();
$menuFactory-&gt;setEntityNamespace('Elcodi\Component\Menu\Entity\Menu\Node');
$menuNode = $menuFactory
    -&gt;create()
    -&gt;setName('Dashboard')
    -&gt;setCode('dashboard')
    -&gt;setUrl('http://myurl.com')
    -&gt;setActiveUrls([
        'http://myurl.com/admin'
    ])
    -&gt;setEnabled(true);

$menuFactory = new MenuFactory();
$menuFactory-&gt;setEntityNamespace('Elcodi\Component\Menu\Entity\Menu\Menu');
$menu = $menuFactory
    -&gt;create()
    -&gt;setName('admin')
    -&gt;setDescription('Admin menu')
    -&gt;setEnabled(true)
    -&gt;addSubnode($menuNode);
</code></pre>

<h2 id="managing-menus">Managing menus<a class="headerlink" href="#managing-menus" title="Permanent link"> #</a></h2>
<p>Using the class <code>MenuManager</code> you will be able to manage your menus. This 
manager is not simple, so has the responsibility to manage all menus using local
cache, Doctrine cache and Database repository.</p>
<pre><code class="php">use Doctrine\Common\Cache\CacheProvider;
use Doctrine\Common\Persistence\ObjectManager;

use Elcodi\Component\Core\Encoder\Interfaces\EncoderInterface;
use Elcodi\Component\Menu\Repository\MenuRepository;

$menuRepository = ...; // MenuRepository
$menuObjectManager = ...; // ObjectManager
$menuCache = ...; // CacheProvider
$menuEncoder = ...; //EncoderInterface
$menuCacheKey = 'menus';

$menuManager = new MenuManager(
    $menuRepository,
    $menuObjectManager,
    $menuCacheKey
);
$menuManager
    -&gt;setCache($menuCache)
    -&gt;setEncoder($menuEncoder);

$adminMenu = $menuManager-&gt;loadMenuByCode('admin');
</code></pre>

<p>Each menu, once loaded from database, is detached in a cascade mode. It means
that you cannot modify a menu using any kind of event and save it into database.</p>
<p>Lets see how a menu can be changed on the fly.</p>
<blockquote>
<p>Since now, when we refer to a Changer element, we are referring to Filters,
Modifiers or Builders</p>
</blockquote>
<h2 id="cache">Cache<a class="headerlink" href="#cache" title="Permanent link"> #</a></h2>
<p>Of course this component is built on top of a simple cache layer, so each time 
a new menu is loaded from database, there are two different stages: before the 
menu is cached <code>ElcodiMenuStages::BEFORE_CACHE</code> and after the menu is cached 
<code>ElcodiMenuStages::AFTER_CACHE</code>.</p>
<p>The difference is that when you apply a changer before the result is cached, 
those changes will be reused until the menu is removed from the cache and 
rebuilt again.</p>
<pre><code class="php">use Elcodi\Component\Menu\Services\MenuFilterer;
use Elcodi\Component\Menu\ElcodiMenuStages;

$menuFilterer = new MenuFilterer();
$menuFilterer
    -&gt;addMenuFilter(
        new MenuDisabledFilter(),
        [],
        ElcodiMenuStages::BEFORE_CACHE,
        0
    );
</code></pre>

<p>So, if one specific filter, a builder or a modifier must be executed in every
request, then must be defined as the after-cache stage.</p>
<h2 id="specific-menus">Specific menus<a class="headerlink" href="#specific-menus" title="Permanent link"> #</a></h2>
<p>When we add a changer element, we can specify a set of menu elements where we
want this changes to be applied to. You can as well apply them to all menus, so
this parameter should be an empty array.</p>
<pre><code class="php">use Elcodi\Component\Menu\Services\MenuFilterer;
use Elcodi\Component\Menu\ElcodiMenuStages;

$menuFilterer = new MenuFilterer();
$menuFilterer
    -&gt;addMenuFilter(
        new MenuDisabledFilter(),
        ['admin', 'store'],
        ElcodiMenuStages::BEFORE_CACHE,
        0
    );
</code></pre>

<p>In that case, we are setting that our filter should only be applied to menus 
called <code>admin</code> and <code>store</code>.</p>
<h2 id="priority">Priority<a class="headerlink" href="#priority" title="Permanent link"> #</a></h2>
<p>Once we have several changers, then we can prioritize them by using priority
parameter.</p>
<pre><code class="php">use Elcodi\Component\Menu\Services\MenuFilterer;
use Elcodi\Component\Menu\ElcodiMenuStages;

$menuFilterer = new MenuFilterer();
$menuFilterer
    -&gt;addMenuFilter(
        new MenuDisabledFilter(),
        ['admin'],
        ElcodiMenuStages::BEFORE_CACHE,
        0
    );
$menuFilterer
    -&gt;addMenuFilter(
        new AnotherMenuFilter(),
        ['admin'],
        ElcodiMenuStages::BEFORE_CACHE,
        10
    );
</code></pre>

<p>In that case, and because more priority means earlier execution, filter
<code>AnotherMenuFilter</code> will be executed before than filter <code>MenuDisabledFilter</code>.</p>
<h2 id="filtering-menus">Filtering menus<a class="headerlink" href="#filtering-menus" title="Permanent link"> #</a></h2>
<p>You can filter existing menus. It means that, considering any node, one by one,
you can decide if this node (and all subnodes) must continue being inside the 
menu.</p>
<p>If a node is considered as invalid, then all subnodes will, automatically, 
treated as invalids.</p>
<p>Let's see an example of a MenuFilter that removed a node if this one is not 
enabled.</p>
<pre><code>use Elcodi\Component\Menu\Filter\Interfaces\MenuFilterInterface;
use Elcodi\Component\Menu\Entity\Menu\Interfaces\NodeInterface;

/**
 * Class MenuDisabledFilter
 */
class MenuDisabledFilter implements MenuFilterInterface
{
    /**
     * Filter a node once this has to be rendered
     *
     * @param NodeInterface $menuNode Menu node
     *
     * @return boolean Node must be rendered
     */
    public function filter(NodeInterface $menuNode)
    {
        return $menuNode-&gt;isEnabled();
    }
}
</code></pre>

<p>Then you must add this changer once your manager is instanced in order to use it
in Menu building time. In this example we will add a filter that will check 
when a menu is disabled in database. Then this menu node should be removed from
the tree.</p>
<pre><code class="php">use Elcodi\Component\Menu\Services\MenuFilterer;

$menuFilterer = new MenuFilterer();
$menuFilterer
    -&gt;addMenuFilter(
        new MenuDisabledFilter(),
        [],
        ElcodiMenuStages::BEFORE_CACHE,
        0
    );

$menuManager = new MenuManager(
    $menuRepository,
    $menuObjectManager,
    $menuCacheKey
);
$menuManager
    -&gt;setCache($menuCache)
    -&gt;setEncoder($menuEncoder)
    -&gt;addMenuChanger($menuFilterer)

$adminMenu = $menuManager-&gt;loadMenuByCode('admin');
</code></pre>

<p>If we check the menu tree, then we could draw something like that</p>
<pre><code>Menu
  |
  |- Node1 &lt;enabled&gt;
  |   |
  |   |- Node2 &lt;disabled&gt;
  |   |   |
  |   |   |- Node3 &lt;enabled&gt;
  |   |
  |   |- Node4 &lt;enabled&gt;
  |
  |- Node5 &lt;disabled&gt;
</code></pre>

<p>So after applying this filters, we will have this menu</p>
<pre><code>Menu
  |
  |- Node1 &lt;enabled&gt;
      |
      |- Node4 &lt;enabled&gt;
</code></pre>

<h2 id="building-menus">Building menus<a class="headerlink" href="#building-menus" title="Permanent link"> #</a></h2>
<p>Once the menu is requested from the repository and detached from the object
manager, you can add more nodes in order to configure it.</p>
<p>Let's see an example that adds a new Node inside the Node dashboard. For this,
both entities Menu and Node have a method called <code>findNodeByKey</code> that returns,
if exists, the Node with given code, looking for inside all subnodes, 
recursively.</p>
<pre><code>use Elcodi\Component\Menu\Builder\Interfaces\MenuBuilderInterface;
use Elcodi\Component\Menu\Entity\Menu\Interfaces\NodeInterface;
use Elcodi\Component\Menu\Factory\NodeFactory;

/**
 * Class MenuBuilderUser
 */
class MenuBuilderUser implements MenuBuilderInterface
{
    /**
     * Build the menu
     *
     * @param MenuInterface $menu Menu
     */
    public function build(MenuInterface $menuNode)
    {
        $menuNodeFactory = new NodeFactory();
        $menuFactory-&gt;setEntityNamespace('Elcodi\Component\Menu\Entity\Menu\Node');
        $userNode = $menuNodeFactory
            -&gt;create()
            -&gt;setName('User')
            -&gt;setCode('user')
            -&gt;setUrl('http://myurl.com/admin/user')
            -&gt;setEnabled(true);

        $dashboardNode = $menu-&gt;findSubnodeByName('Dashboard');

        if ($dashboardNode instanceof NodeInterface) {
            $dashboardNode-&gt;addSubnode($userNode);
        }
    }
}
</code></pre>

<p>Then you must add this changer once your manager is instanced in order to use it
in Menu building time.</p>
<pre><code class="php">use Elcodi\Component\Menu\Services\MenuBuilder;

$menuBuilder = new MenuBuilder();
$menuBuilder
    -&gt;addMenuBuilder(
        new MenuBuilderUser(),
        [],
        ElcodiMenuStages::BEFORE_CACHE,
        0
    );

$menuManager = new MenuManager(
    $menuRepository,
    $menuObjectManager,
    $menuCacheKey
);
$menuManager
    -&gt;setCache($menuCache)
    -&gt;setEncoder($menuEncoder)
    -&gt;addMenuChanger($menuBuilder)

$adminMenu = $menuManager-&gt;loadMenuByCode('admin');
</code></pre>

<h2 id="modifying-menus">Modifying menus<a class="headerlink" href="#modifying-menus" title="Permanent link"> #</a></h2>
<p>Maybe you want to modify a single menu. For this you can use the Menu Modifiers,
a type of changer that is intended, only, for single Menu Node modifications.</p>
<p>Let's see an example that sets <code>active</code> as true if, given a Request object, 
current route matches any of specified as active routes.</p>
<pre><code>use Symfony\Component\HttpFoundation\Request;

use Elcodi\Component\Menu\Entity\Menu\Interfaces\NodeInterface;
use Elcodi\Component\Menu\Modifier\Interfaces\MenuModifierInterface;

/**
 * Class MenuActiveModifier
 */
class MenuActiveModifier implements MenuModifierInterface
{
    /**
     * Modifier the menu node
     *
     * @param NodeInterface $menuNode Menu node
     */
    public function modify(NodeInterface $menuNode)
    {
        $request = ...; // Request

        $currentRoute = $request-&gt;get('_route');

        if (in_array($currentRoute, $menuNode-&gt;getActiveUrls())) {
            $menuNode-&gt;setActive(true);
        }
    }
}
</code></pre>

<p>Then you must add this changer once your manager is instanced in order to use it
in Menu building time.</p>
<pre><code class="php">use Elcodi\Component\Menu\Services\MenuModifier;

$menuModifier = new MenuModifier();
$menuModifier
    -&gt;addMenuModifier(
        new MenuActiveModifier(),
        [],
        ElcodiMenuStages::BEFORE_CACHE,
        0
    );

$menuManager = new MenuManager(
    $menuRepository,
    $menuObjectManager,
    $menuCacheKey
);
$menuManager
    -&gt;setCache($menuCache)
    -&gt;setEncoder($menuEncoder)
    -&gt;addMenuChanger($menuModifier)

$adminMenu = $menuManager-&gt;loadMenuByCode('admin');
</code></pre>

<h2 id="using-the-dic">Using the DIC<a class="headerlink" href="#using-the-dic" title="Permanent link"> #</a></h2>
<p>Exposing your Menu changers (Filters, Builders and Modifiers) is so simple using
the Symfony Dependency Injection definitions. For this purpose, this bundle is
built on top the tags feature, allowing to define a simple changer just adding
a simple tag.</p>
<p>By default, this Bundle has three changers defined and enabled.</p>
<pre><code class="yaml">services:

    #
    # Menu filters
    #
    elcodi.menu_filter.menu_disabled:
        class: Elcodi\Component\Menu\Filter\MenuDisabledFilter
        tags:
            - { name: menu.filter }

    #
    # Menu modifiers
    #
    elcodi.menu_modifier.menu_active:
        class: Elcodi\Component\Menu\Modifier\MenuActiveModifier
        arguments:
            - @request_stack
        tags:
            - { name: menu.modifier }

    elcodi.menu_modifier.menu_expanded:
        class: Elcodi\Component\Menu\Modifier\MenuExpandedModifier
        arguments:
            - @request_stack
        tags:
            - { name: menu.modifier }
</code></pre>

<p>As you can see, there is no any Builder defined here. Let's see an example of a
Builder definition.</p>
<pre><code class="yaml">services:

    #
    # Menu builders
    #
    store.plugin.menu_builder.plugins:
        class: Elcodi\Admin\PluginBundle\MenuBuilder\PluginMenuBuilder
        arguments:
            - @elcodi.factory.menu_node
            - @router
            - @elcodi.enabled_plugins
        tags:
            - { name: menu.builder }
</code></pre>

<p>You can define as much elements you need.</p>
<h2 id="workflow">Workflow<a class="headerlink" href="#workflow" title="Permanent link"> #</a></h2>
<p>The order matters. It means that is not the same to apply all the filters first
of all and then execute the modifiers, or applying the other way.</p>
<p>This bundle define all changers in this order</p>
<ul>
<li>Builders</li>
<li>Filters</li>
<li>Modifiers</li>
</ul>
<h2 id="cache_1">Cache<a class="headerlink" href="#cache_1" title="Permanent link"> #</a></h2>
<p>Each changer can be used before or after cache by setting its stage. Please, 
read the <a href="http://elcodi.io/docs/component/menu/">component documentation</a> to 
understand what means this configuration and what is indended for.</p>
<pre><code class="yaml">services:

    #
    # Menu builders
    #
    store.plugin.menu_builder.some_builder:
        class: Namespace\Of\Menu\Builder
        tags:
            - { name: menu.builder, stage: before_cache }
            - { name: menu.builder, stage: after_cache }
</code></pre>

<p>By default, <code>before_cache</code> will be used.</p>
<h2 id="specific-menus_1">Specific menus<a class="headerlink" href="#specific-menus_1" title="Permanent link"> #</a></h2>
<p>Each changer can be assigned to a set of menus by using the menus property in 
the tag definition.</p>
<pre><code class="yaml">services:

    #
    # Menu builders
    #
    store.plugin.menu_builder.some_builder:
        class: Namespace\Of\Menu\Builder
        tags:
            - { name: menu.builder, menus: ['admin', 'store'] }
</code></pre>

<p>By default, all menus will be assigned.</p>
<h2 id="priority_1">Priority<a class="headerlink" href="#priority_1" title="Permanent link"> #</a></h2>
<p>Each group will prioritize all its instances by using priority. You can set a 
priority using the tag.</p>
<pre><code class="yaml">services:

    #
    # Menu builders
    #
    store.plugin.menu_builder.some_builder:
        class: Namespace\Of\Menu\Builder
        tags:
            - { name: menu.builder, priority: 10 }
</code></pre>

<p>By default, priority 0 will be used.</p>
<blockquote>
<p>The more priority, the before this changer is applied. Negative values are
kindly allowed here.</p>
</blockquote></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
                <p>Copyright © 2014/2015 <a href="http://www.elcodi.io">Elcodi</a>. All rights reserved.</p>
            
        </footer>

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>var base_url = '../..';</script>
        <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
        <script src="../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
